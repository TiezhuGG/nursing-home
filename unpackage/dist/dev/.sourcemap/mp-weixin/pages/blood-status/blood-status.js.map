{"version":3,"sources":["webpack:///C:/Users/window/Desktop/nursing-home/main.js","webpack:///C:/Users/window/Desktop/nursing-home/pages/blood-status/blood-status.vue?e3ae","webpack:///C:/Users/window/Desktop/nursing-home/pages/blood-status/blood-status.vue?b9c7","webpack:///C:/Users/window/Desktop/nursing-home/pages/blood-status/blood-status.vue?b114","webpack:///C:/Users/window/Desktop/nursing-home/pages/blood-status/blood-status.vue?3daa","webpack:///C:/Users/window/Desktop/nursing-home/pages/blood-status/blood-status.vue","webpack:///C:/Users/window/Desktop/nursing-home/pages/blood-status/blood-status.vue?789b","webpack:///C:/Users/window/Desktop/nursing-home/pages/blood-status/blood-status.vue?2763"],"names":["createPage","Page","_self","canvaLineA","data","navTitles","currentIndex","cWidth","cHeight","pixelRatio","patientList","patient","chart","bp_devices","bp_connected","bp_chs","bp_discoveryStarted","bp_canWrite","bp_deviceId","bp_serviceId","bp_characteristicId","bp_list","bp_categories","bo_devices","bo_connected","bo_chs","bo_discoveryStarted","bo_canWrite","bo_deviceId","bo_serviceId","bo_characteristicId","bo_list","bo_categories","this_week","avg_val_blood","avg_val_time","onLoad","options","bpid","console","log","test","patient_id","fetchPatientInfo","fetchPatientList","uni","upx2px","watch","newVal","oldVal","updateData","categories","series","name","deep","methods","setInterval","randomData","Math","random","timer","push","length","shift","showLineA","canvasId","uCharts","$this","type","fontSize","colors","legend","show","dataLabel","dataPointShape","background","animation","xAxis","disableGrid","yAxis","axisLine","gridType","gridColor","dashLength","min","max","format","val","toFixed","width","height","extra","line","bindPickerChange","e","item","id","Number","detail","value","setStorage","key","request","url","success","res","switchTab","index","getServerData","LineA","fail","tips","touchLineA","showToolTip","category","inArray","arr","i","ab2hex","buffer","hexArr","Array","prototype","map","call","Uint8Array","bit","toString","slice","join","bp_openBluetoothAdapter","openBluetoothAdapter","bp_startBluetoothDevicesDiscovery","errCode","onBluetoothAdapterStateChange","available","startBluetoothDevicesDiscovery","allowDuplicatesKey","bp_onBluetoothDeviceFound","bp_getBluetoothAdapterState","getBluetoothAdapterState","discovering","onBluetoothDeviceFound","devices","bp_createBLEConnection","bp_stopBluetoothDevicesDiscovery","stopBluetoothDevicesDiscovery","deviceId","createBLEConnection","bp_getBLEDeviceServices","bp_closeBLEConnection","closeBLEConnection","setData","connected","chs","canWrite","getBLEDeviceServices","services","uuid","bp_getBLEDeviceCharacteristics","serviceId","getBLEDeviceCharacteristics","characteristics","bp_writeBLECharacteristicValue","notifyBLECharacteristicValueChange","characteristicId","state","error","onBLECharacteristicValueChange","characteristic","vale","substr","parseInt","sz","ArrayBuffer","dataView","DataView","setUint8","writeBLECharacteristicValue","bp_closeBluetoothAdapter","closeBluetoothAdapter","getNowTime","now","Date","hour","getHours","minute","getMinutes","second","getSeconds","now_time"],"mappings":"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","file":"pages/blood-status/blood-status.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'\nimport Page from './pages/blood-status/blood-status.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./blood-status.vue?vue&type=template&id=54a461d8&\"\nvar renderjs\nimport script from \"./blood-status.vue?vue&type=script&lang=js&\"\nexport * from \"./blood-status.vue?vue&type=script&lang=js&\"\nimport style0 from \"./blood-status.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"Users/window/Desktop/nursing-home/pages/blood-status/blood-status.vue\"\nexport default component.exports","export * from \"-!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./blood-status.vue?vue&type=template&id=54a461d8&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./blood-status.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./blood-status.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport uCharts from '@/components/u-charts/u-charts.js';\nvar _self;\nvar canvaLineA = null;\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tnavTitles: ['血压', '血氧', '血糖'],\n\t\t\tcurrentIndex: 0,\n\t\t\tcWidth: '',\n\t\t\tcHeight: '',\n\t\t\tpixelRatio: 1,\n\t\t\tpatientList: [],\n\t\t\tpatient: null,\n\t\t\tchart: 1,\n\t\t\t// heart_rate_list: [],\n\t\t\t// categories: [],\n\t\t\t// 血压\n\t\t\tbp_devices: [],\n\t\t\tbp_connected: false,\n\t\t\tbp_chs: [],\n\t\t\tbp_discoveryStarted: false,\n\t\t\tbp_canWrite: false,\n\t\t\tbp_deviceId: '',\n\t\t\tbp_serviceId: '',\n\t\t\tbp_characteristicId: '',\n\t\t\tbp_list: [],\n\t\t\tbp_categories: [],\n\t\t\t// 血氧\n\t\t\tbo_devices: [],\n\t\t\tbo_connected: false,\n\t\t\tbo_chs: [],\n\t\t\tbo_discoveryStarted: false,\n\t\t\tbo_canWrite: false,\n\t\t\tbo_deviceId: '',\n\t\t\tbo_serviceId: '',\n\t\t\tbo_characteristicId: '',\n\t\t\tbo_list: [],\n\t\t\tbo_categories: [],\n\n\t\t\tthis_week: '6月7日-6月13日',\n\t\t\tavg_val_blood: '135/80',\n\t\t\tavg_val_time: 65,\n\t\t};\n\t},\n\tonLoad(options) {\n\t\t// console.log('bpid',options.bpid)\n\t\t// 从工作台进页面有患者id就执行\n\t\tif(options.bpid) {\n\t\t\tconsole.log('从工作台进来',options.bpid)\n\t\t\tthis.test(options.bpid)\n\t\t}\n\t\t// 从客户管理界面进来会传入patient_id\n\t\tif(options.patient_id) {\n\t\t\tconsole.log('从客户管理界面进来',options.patient_id)\n\t\t\tthis.fetchPatientInfo(options.patient_id)\n\t\t\tthis.test(options.patient_id)\n\t\t}\n\t\t_self = this;\n\t\t_self.fetchPatientList()\n\t\t// 加载页面渲染血压的图表信息\n\t\t// this.getServerData(1);\n\t\tthis.cWidth = uni.upx2px(750);\n\t\tthis.cHeight = uni.upx2px(500);\n\t},\n\n\twatch: {\n\t\tpatient(newVal, oldVal) {\n\t\t\t// console.log(newVal)\n\t\t\t// console.log(oldVal)\n\t\t\t// 切换病人时清空图表数据（重新渲染图表）\n\t\t\tthis.bp_list = []\n\t\t\tthis.bp_categories = []\n\t\t\tif (oldVal != null) {\n\t\t\t\tcanvaLineA.updateData({\n\t\t\t\t\tcategories: this.bp_categories,\n\t\t\t\t\tseries: [{\n\t\t\t\t\t\tname: '实时心率',\n\t\t\t\t\t\tdata: this.bp_list\n\t\t\t\t\t}],\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\tdeep: true\n\t},\n\n\tmethods: {\n\t\ttest(bpid) {\n\t\t\tthis.fetchPatientInfo(bpid)\n\t\t\tsetInterval(() => {\n\t\t\t\tlet randomData = Math.random() * 300\n\t\t\t\tlet timer = Math.random() * 300\n\t\t\t\tthis.bp_list.push(randomData)\n\t\t\t\tthis.bp_categories.push(timer)\n\t\t\t\t// console.log(this.bp_list)\n\t\t\t\tif (this.bp_list.length > 8) {\n\t\t\t\t\tthis.bp_list.shift()\n\t\t\t\t\tthis.bp_categories.shift()\n\t\t\t\t}\n\n\t\t\t\t// 初始化图表实例\n\t\t\t\t_self.showLineA(this.chart)\n\t\t\t\t// updateData更新图表\n\t\t\t\tcanvaLineA.updateData({\n\t\t\t\t\tcategories: this.bp_categories,\n\t\t\t\t\tseries: [{\n\t\t\t\t\t\tname: '血压 ',\n\t\t\t\t\t\tdata: _self.bp_list\n\t\t\t\t\t}],\n\t\t\t\t})\n\t\t\t}, 1500)\n\n\t\t},\n\t\t\n\t\tshowLineA(canvasId) {\n\t\t\tcanvaLineA = new uCharts({\n\t\t\t\t$this: _self,\n\t\t\t\tcanvasId: canvasId,\n\t\t\t\ttype: 'line',\n\t\t\t\tfontSize: 11,\n\t\t\t\tcolors: ['#24C789'],\n\t\t\t\tlegend: {\n\t\t\t\t\tshow: true\n\t\t\t\t},\n\t\t\t\tdataLabel: false,\n\t\t\t\tdataPointShape: true,\n\t\t\t\tbackground: '#FFFFFF',\n\t\t\t\tpixelRatio: _self.pixelRatio,\n\t\t\t\tcategories: '',\n\t\t\t\tseries: [{\n\t\t\t\t\tname: '实时心率',\n\t\t\t\t\tdata: ''\n\t\t\t\t}],\n\t\t\t\tanimation: false,\n\t\t\t\txAxis: {\n\t\t\t\t\tdisableGrid: true\n\t\t\t\t},\n\t\t\t\tyAxis: {\n\t\t\t\t\tdata: [{\n\t\t\t\t\t\taxisLine: false,\n\t\t\t\t\t}],\n\t\t\t\t\tgridType: 'dash',\n\t\t\t\t\tgridColor: '#CCC',\n\t\t\t\t\tdashLength: 2,\n\t\t\t\t\tmin: 0.00,\n\t\t\t\t\tmax: 150.00,\n\t\t\t\t\tformat: (val) => {\n\t\t\t\t\t\treturn val.toFixed(0.00)\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\twidth: _self.cWidth * _self.pixelRatio,\n\t\t\t\theight: _self.cHeight * _self.pixelRatio,\n\t\t\t\textra: {\n\t\t\t\t\tline: {\n\t\t\t\t\t\ttype: 'curve'\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\n\t\tbindPickerChange(e) {\n\t\t\t// console.log(e)\n\t\t\tfor (let item of this.patientList) {\n\t\t\t\tif (item.id === Number(e.detail.value) + 1) {\n\t\t\t\t\t// this.fetchPatientInfo(item.id)\n\t\t\t\t\t// 把患者id缓存到本地\n\t\t\t\t\tuni.setStorage({\n\t\t\t\t\t\tkey: 'bpid',\n\t\t\t\t\t\tdata: item.id\n\t\t\t\t\t})\n\t\t\t\t\tthis.test(item.id)\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t// 获取患者列表(ID)\n\t\tasync fetchPatientList() {\n\t\t\tawait uni.request({\n\t\t\t\turl: 'https://ciai.le-cx.com/index.php/api/patient/patientList',\n\t\t\t\tsuccess: res => {\n\t\t\t\t\tthis.patientList = res.data.data\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\t// 获取患者信息\n\t\tasync fetchPatientInfo(id) {\n\t\t\tawait uni.request({\n\t\t\t\turl: `https://ciai.le-cx.com/index.php/api/patient/info?id=${id}`,\n\t\t\t\tsuccess: res => {\n\t\t\t\t\tthis.patient = res.data.data\n\t\t\t\t},\n\t\t\t})\n\t\t},\n\t\t// 切换导航tab\n\t\tswitchTab(index) {\n\t\t\tthis.currentIndex = index\n\t\t\t// 切换导航改变对应的图表canvas-id\n\t\t\tthis.chart = index + 1\n\t\t\t// this.getServerData(this.currentIndex + 1)\n\t\t},\n\n\t\tgetServerData(canvasId) {\n\t\t\tuni.request({\n\t\t\t\turl: 'https://www.ucharts.cn/data.json',\n\t\t\t\tdata: {},\n\t\t\t\tsuccess: function(res) {\n\t\t\t\t\t// console.log(res.data.data)\n\t\t\t\t\tlet LineA = {\n\t\t\t\t\t\tcategories: [],\n\t\t\t\t\t\tseries: []\n\t\t\t\t\t};\n\t\t\t\t\t//这里我后台返回的是数组，所以用等于，如果您后台返回的是单条数据，需要push进去\n\t\t\t\t\tLineA.categories = res.data.data.LineA.categories;\n\t\t\t\t\t// LineA.series = res.data.data.LineA.series;\n\t\t\t\t\t// LineA.series = res.data.data.LineA.series;\n\t\t\t\t\t// LineA.series = [LineA.series.pop()];\n\t\t\t\t\t// console.log(LineA.series)\n\t\t\t\t\tLineA.series = [{\n\t\t\t\t\t\tdata: [0, 100, 70, 20, 100, 50],\n\t\t\t\t\t\tname: 'aa'\n\t\t\t\t\t}]\n\t\t\t\t\t_self.showLineA(canvasId, LineA);\n\t\t\t\t},\n\t\t\t\tfail: () => {\n\t\t\t\t\t_self.tips = \"网络错误，小程序端请检查合法域名\";\n\t\t\t\t},\n\t\t\t});\n\t\t},\n\t\t\n\t\ttouchLineA(e) {\n\t\t\tcanvaLineA.showToolTip(e, {\n\t\t\t\tformat: function(item, category) {\n\t\t\t\t\treturn category + ' ' + item.name + ':' + item.data\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t\n\t\tinArray(arr, key, val) {\n\t\t\tfor (let i = 0; i < arr.length; i++) {\n\t\t\t\tif (arr[i][key] === val) {\n\t\t\t\t\treturn i;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn -1;\n\t\t},\n\n\t\t// ArrayBuffer转16进度字符串示例\n\t\tab2hex(buffer) {\n\t\t\tvar hexArr = Array.prototype.map.call(\n\t\t\t\tnew Uint8Array(buffer),\n\t\t\t\tfunction(bit) {\n\t\t\t\t\treturn ('00' + bit.toString(16)).slice(-2)\n\t\t\t\t}\n\t\t\t)\n\t\t\treturn hexArr.join('');\n\t\t},\n\n\t\tbp_openBluetoothAdapter() {\n\t\t\tconsole.log('获取血压信息')\n\t\t\tuni.openBluetoothAdapter({\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tconsole.log('openBluetoothAdapter success', res)\n\t\t\t\t\tthis.bp_startBluetoothDevicesDiscovery()\n\t\t\t\t},\n\t\t\t\tfail: (res) => {\n\t\t\t\t\tif (res.errCode === 10001) {\n\t\t\t\t\t\tuni.onBluetoothAdapterStateChange((res) => {\n\t\t\t\t\t\t\t// console.log('onBluetoothAdapterStateChange', res)\n\t\t\t\t\t\t\tif (res.available) {\n\t\t\t\t\t\t\t\tthis.bp_startBluetoothDevicesDiscovery()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tbp_startBluetoothDevicesDiscovery() {\n\t\t\tif (this.bp_discoveryStarted) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\tthis.bp_discoveryStarted = true\n\t\t\tuni.startBluetoothDevicesDiscovery({\n\t\t\t\tallowDuplicatesKey: true,\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tconsole.log('startBluetoothDevicesDiscovery success', res)\n\t\t\t\t\tthis.bp_onBluetoothDeviceFound()\n\t\t\t\t},\n\t\t\t})\n\t\t},\n\t\tbp_getBluetoothAdapterState() {\n\t\t\tconsole.log('getBluetoothAdapterState')\n\t\t\tuni.getBluetoothAdapterState({\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tconsole.log('getBluetoothAdapterState', res)\n\t\t\t\t\tif (res.discovering) {\n\t\t\t\t\t\tthis.bp_onBluetoothDeviceFound()\n\t\t\t\t\t} else if (res.available) {\n\t\t\t\t\t\tthis.bp_startBluetoothDevicesDiscovery()\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tbp_onBluetoothDeviceFound() {\n\t\t\tuni.onBluetoothDeviceFound((res) => {\n\t\t\t\tvar devices = res.devices\n\t\t\t\tconsole.log('devices', devices)\n\t\t\t\tif (devices[0].name == 'FSRKB_BT_001') {\n\t\t\t\t\tlet e = devices[0]\n\t\t\t\t\tthis.bp_createBLEConnection(e)\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tbp_stopBluetoothDevicesDiscovery() {\n\t\t\tuni.stopBluetoothDevicesDiscovery()\n\t\t},\n\n\t\tbp_createBLEConnection(e) {\n\t\t\t// const ds = e.currentTarget.dataset\n\t\t\tconst deviceId = e.deviceId\n\t\t\tconst name = e.name\n\t\t\tuni.createBLEConnection({\n\t\t\t\tdeviceId,\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tthis.bp_connected = true\n\t\t\t\t\t// this.setData({\n\t\t\t\t\t// \tconnected: true,\n\t\t\t\t\t// \tname,\n\t\t\t\t\t// \tdeviceId,\n\t\t\t\t\t// })\n\t\t\t\t\tthis.bp_getBLEDeviceServices(deviceId)\n\t\t\t\t}\n\t\t\t})\n\t\t\tthis.bp_stopBluetoothDevicesDiscovery()\n\t\t},\n\t\tbp_closeBLEConnection() {\n\t\t\tuni.closeBLEConnection({\n\t\t\t\tdeviceId: this.data.deviceId\n\t\t\t})\n\t\t\tthis.setData({\n\t\t\t\tconnected: false,\n\t\t\t\tchs: [],\n\t\t\t\tcanWrite: false,\n\t\t\t})\n\t\t},\n\t\tbp_getBLEDeviceServices(deviceId) {\n\t\t\tuni.getBLEDeviceServices({\n\t\t\t\tdeviceId,\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tfor (let i = 0; i < res.services.length; i++) {\n\t\t\t\t\t\tif (res.services[i].uuid == '0000FFF0-0000-1000-8000-00805F9B34FB') {\n\t\t\t\t\t\t\tthis.bp_getBLEDeviceCharacteristics(deviceId, res.services[i].uuid)\n\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tbp_getBLEDeviceCharacteristics(deviceId, serviceId) {\n\t\t\tuni.getBLEDeviceCharacteristics({\n\t\t\t\tdeviceId,\n\t\t\t\tserviceId,\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t// console.log('getBLEDeviceCharacteristics success', res.characteristics)\n\t\t\t\t\tfor (let i = 0; i < res.characteristics.length; i++) {\n\t\t\t\t\t\tlet item = res.characteristics[i]\n\t\t\t\t\t\tif (item.uuid == '0000FFF6-0000-1000-8000-00805F9B34FB') {\n\t\t\t\t\t\t\t// this.setData({\n\t\t\t\t\t\t\t// \tbp_canWrite: true\n\t\t\t\t\t\t\t// })\n\t\t\t\t\t\t\tthis.bp_canWrite = true\n\t\t\t\t\t\t\tthis.bp_deviceId = deviceId\n\t\t\t\t\t\t\tthis.bp_serviceId = serviceId\n\t\t\t\t\t\t\tthis.bp_characteristicId = item.uuid\n\t\t\t\t\t\t\tthis.bp_writeBLECharacteristicValue()\n\n\t\t\t\t\t\t\tuni.notifyBLECharacteristicValueChange({\n\t\t\t\t\t\t\t\tdeviceId,\n\t\t\t\t\t\t\t\tserviceId,\n\t\t\t\t\t\t\t\tcharacteristicId: item.uuid,\n\t\t\t\t\t\t\t\tstate: true,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tfail(res) {\n\t\t\t\t\tconsole.error('getBLEDeviceCharacteristics', res)\n\t\t\t\t}\n\t\t\t})\n\t\t\t// 操作之前先监听，保证第一时间获取数据\n\t\t\tuni.onBLECharacteristicValueChange((characteristic) => {\n\t\t\t\tlet vale = ab2hex(characteristic.value)\n\t\t\t\tif (vale.substr(6, 2) == 'cc') { //判断是否测量结束，结束则进入\n\t\t\t\t\tif (vale.substr(10, 2) == '00') { //判断是否错误，错误则进入\n\t\t\t\t\t\tswitch (parseInt(vale.substr(8, 2), 16)) {\n\t\t\t\t\t\t\tcase 1:\n\t\t\t\t\t\t\t\tconsole.log('传感器异常！')\n\t\t\t\t\t\t\t\tbreak\n\n\t\t\t\t\t\t\tcase 2:\n\t\t\t\t\t\t\t\tconsole.log('不足以检测心跳或血压！')\n\t\t\t\t\t\t\t\tbreak\n\n\t\t\t\t\t\t\tcase 3:\n\t\t\t\t\t\t\t\tconsole.log('异常测量结果！')\n\t\t\t\t\t\t\t\tbreak\n\n\t\t\t\t\t\t\tcase 4:\n\t\t\t\t\t\t\t\tconsole.log('袖口太松或泄漏（10秒压力小于30毫米）')\n\t\t\t\t\t\t\t\tbreak\n\n\t\t\t\t\t\t\tcase 5:\n\t\t\t\t\t\t\t\tconsole.log('气管堵塞')\n\t\t\t\t\t\t\t\tbreak\n\n\t\t\t\t\t\t\tcase 6:\n\t\t\t\t\t\t\t\tconsole.log('压力波动过大')\n\t\t\t\t\t\t\t\tbreak\n\n\t\t\t\t\t\t\tcase 7:\n\t\t\t\t\t\t\t\tconsole.log('压力超过上限')\n\t\t\t\t\t\t\t\tbreak\n\n\t\t\t\t\t\t\tcase 8:\n\t\t\t\t\t\t\t\tconsole.log('请查看标准数据是否异常')\n\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t}\n\t\t\t\t\t} else { //输出测量结果\n\t\t\t\t\t\tconsole.log('高压：', parseInt(vale.substr(8, 2), 16), '低压：', parseInt(vale.substr(10, 2), 16), '心率',\n\t\t\t\t\t\t\tparseInt(\n\t\t\t\t\t\t\t\tvale.substr(12, 2), 16))\n\t\t\t\t\t}\n\t\t\t\t} else { //输出当前压力值\n\t\t\t\t\tconsole.log('当前压力：', parseInt(vale.substr(10, 2), 16))\n\t\t\t\t// \tlet bp_value = parseInt(vale.substr(10, 2), 16)\n\t\t\t\t// \tlet timer = this.getNowTime()\n\t\t\t\t// \tthis.bp_list.push(bp_value)\n\t\t\t\t// \tthis.bp_categories.push(timer)\n\t\t\t\t// \tif (this.bp_list.length > 8) {\n\t\t\t\t// \t\tthis.bp_list.shift()\n\t\t\t\t// \t\tthis.bp_categories.shift()\n\t\t\t\t// \t}\n\t\t\t\t// \t_self.showLineA(\"charts\")\n\t\t\t\t// \t// updateData更新图表\n\t\t\t\t// \tcanvaLineA.updateData({\n\t\t\t\t// \t\tcategories: this.bp_categories,\n\t\t\t\t// \t\tseries: [{\n\t\t\t\t// \t\t\tname: '血压/血氧/血糖',\n\t\t\t\t// \t\t\tdata: _self.bp_list\n\t\t\t\t// \t\t}],\n\t\t\t\t// \t})\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tbp_writeBLECharacteristicValue() {\n\t\t\tlet sz = [0xBE, 0xB0, 0x01, 0xc0, 0x36]\n\t\t\tlet buffer = new ArrayBuffer(5)\n\t\t\tlet dataView = new DataView(buffer)\n\n\t\t\tfor (let i = 0; i < 5; i++) {\n\t\t\t\tdataView.setUint8(i, sz[i])\n\t\t\t}\n\t\t\tconsole.log(buffer)\n\t\t\tuni.writeBLECharacteristicValue({\n\t\t\t\tdeviceId: this.bp_deviceId,\n\t\t\t\tserviceId: this.bp_serviceId,\n\t\t\t\tcharacteristicId: this.bp_characteristicId,\n\t\t\t\tvalue: buffer,\n\t\t\t})\n\t\t},\n\t\tbp_closeBluetoothAdapter() {\n\t\t\tuni.closeBluetoothAdapter()\n\t\t\tthis.bp_discoveryStarted = false\n\t\t},\n\t\t// 获取当前时间\n\t\tgetNowTime() {\n\t\t\tlet now = new Date()\n\t\t\tlet hour = now.getHours()\n\t\t\tlet minute = now.getMinutes()\n\t\t\tlet second = now.getSeconds()\n\t\t\thour = hour < 10 ? '0' + hour : hour\n\t\t\tminute = minute < 10 ? '0' + minute : minute\n\t\t\tsecond = second < 10 ? '0' + second : second\n\t\t\tlet now_time = `${hour}:${minute}:${second}`\n\t\t\treturn now_time\n\t\t},\n\t},\n}\n","import mod from \"-!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-1!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-2!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./blood-status.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-1!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-2!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./blood-status.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1586499456129\n      var cssReload = require(\"C:/lhf/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}