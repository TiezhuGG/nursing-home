{"version":3,"sources":["webpack:///C:/Users/window/Desktop/nursing-home/main.js","webpack:///C:/Users/window/Desktop/nursing-home/pages/collect-data/collect-data.vue?94d3","webpack:///C:/Users/window/Desktop/nursing-home/pages/collect-data/collect-data.vue?492f","webpack:///C:/Users/window/Desktop/nursing-home/pages/collect-data/collect-data.vue?8fde","webpack:///C:/Users/window/Desktop/nursing-home/pages/collect-data/collect-data.vue?84e0","webpack:///C:/Users/window/Desktop/nursing-home/pages/collect-data/collect-data.vue","webpack:///C:/Users/window/Desktop/nursing-home/pages/collect-data/collect-data.vue?b650","webpack:///C:/Users/window/Desktop/nursing-home/pages/collect-data/collect-data.vue?282f"],"names":["createPage","Page","data","navTitles","currentIndex","cWidth","cHeight","pixelRatio","patientList","patient","pid","bp_devices","bp_connected","bp_chs","bp_discoveryStarted","bp_canWrite","bp_deviceId","bp_serviceId","bp_characteristicId","bp_list","bp_categories","bo_devices","bo_connected","bo_chs","bo_discoveryStarted","bo_canWrite","bo_deviceId","bo_serviceId","bo_characteristicId","bo_list","bo_categories","blood_oxygen","pulse_rate","bo_weared","this_week","avg_val_blood","avg_val_time","onLoad","options","patient_id","fetchPatientInfo","fetchPatientList","watch","newVal","oldVal","bo_closeBluetoothAdapter","methods","bindPickerChange","e","item","id","Number","detail","value","uni","request","url","success","res","switchTab","index","getNowTime","now","Date","hour","getHours","minute","getMinutes","second","getSeconds","now_time","getTimestamp","timestamp","getTime","saveBOData","console","log","length","JSON","stringify","header","method","msg","inArray","arr","key","val","i","ab2hex","buffer","hexArr","Array","prototype","map","call","Uint8Array","bit","toString","slice","join","bp_openBluetoothAdapter","openBluetoothAdapter","bp_startBluetoothDevicesDiscovery","fail","errCode","onBluetoothAdapterStateChange","available","startBluetoothDevicesDiscovery","allowDuplicatesKey","bp_onBluetoothDeviceFound","bp_getBluetoothAdapterState","getBluetoothAdapterState","discovering","onBluetoothDeviceFound","devices","name","bp_createBLEConnection","bp_stopBluetoothDevicesDiscovery","stopBluetoothDevicesDiscovery","deviceId","createBLEConnection","bp_getBLEDeviceServices","getBLEDeviceServices","services","uuid","bp_getBLEDeviceCharacteristics","serviceId","getBLEDeviceCharacteristics","characteristics","bp_writeBLECharacteristicValue","notifyBLECharacteristicValueChange","characteristicId","state","error","onBLECharacteristicValueChange","characteristic","vale","substr","parseInt","sz","ArrayBuffer","dataView","DataView","setUint8","writeBLECharacteristicValue","bp_closeBluetoothAdapter","closeBluetoothAdapter","bo_openBluetoothAdapter","bo_startBluetoothDevicesDiscovery","bo_onBluetoothDeviceFound","showModal","titile","content","bo_createBLEConnection","bo_getBLEDeviceServices","bo_stopBluetoothDevicesDiscovery","bo_getBLEDeviceCharacteristics","bo_writeBLECharacteristicValue","bo","push"],"mappings":"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","file":"pages/collect-data/collect-data.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'\nimport Page from './pages/collect-data/collect-data.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./collect-data.vue?vue&type=template&id=2786e414&\"\nvar renderjs\nimport script from \"./collect-data.vue?vue&type=script&lang=js&\"\nexport * from \"./collect-data.vue?vue&type=script&lang=js&\"\nimport style0 from \"./collect-data.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"Users/window/Desktop/nursing-home/pages/collect-data/collect-data.vue\"\nexport default component.exports","export * from \"-!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./collect-data.vue?vue&type=template&id=2786e414&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./collect-data.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./collect-data.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport uCharts from '@/components/u-charts/u-charts.js';\n\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tnavTitles: ['血压', '血氧', '血糖'],\n\t\t\tcurrentIndex: 0,\n\t\t\tcWidth: '',\n\t\t\tcHeight: '',\n\t\t\tpixelRatio: 1,\n\t\t\tpatientList: [],\n\t\t\tpatient: null,\n\t\t\t// 当前患者id\n\t\t\tpid: '',\n\t\t\t// 血压\n\t\t\tbp_devices: [],\n\t\t\tbp_connected: false,\n\t\t\tbp_chs: [],\n\t\t\tbp_discoveryStarted: false,\n\t\t\tbp_canWrite: false,\n\t\t\tbp_deviceId: '',\n\t\t\tbp_serviceId: '',\n\t\t\tbp_characteristicId: '',\n\t\t\tbp_list: [],\n\t\t\tbp_categories: [],\n\t\t\t// 血氧\n\t\t\tbo_devices: [],\n\t\t\t// 0: 未连接, 1: 已连接, 2: 已断开, 重新连接, 3: 未找到该蓝牙设备\n\t\t\tbo_connected: 0,\n\t\t\tbo_chs: [],\n\t\t\tbo_discoveryStarted: false,\n\t\t\tbo_canWrite: false,\n\t\t\tbo_deviceId: '',\n\t\t\tbo_serviceId: '',\n\t\t\tbo_characteristicId: '',\n\t\t\tbo_list: [],\n\t\t\tbo_categories: [],\n\t\t\tblood_oxygen: null,\n\t\t\tpulse_rate: null,\n\t\t\tbo_weared: false,\n\n\t\t\tthis_week: '6月7日-6月13日',\n\t\t\tavg_val_blood: '135/80',\n\t\t\tavg_val_time: 65,\n\t\t};\n\t},\n\tonLoad(options) {\n\t\t// console.log('options',options)\n\t\t// 从客户管理界面进来会传入patient_id\n\t\tif (options.patient_id) {\n\t\t\tthis.pid = options.patient_id\n\t\t\tthis.fetchPatientInfo(options.patient_id)\n\t\t}\n\t\tthis.fetchPatientList()\n\t},\n\n\twatch: {\n\t\tpatient(newVal, oldVal) {\n\t\t\t// 每次切换病人时关闭蓝牙模块并清空数据列表bo_list, 之后再重新连接蓝牙进行采集数据\n\t\t\tif (oldVal != null) {\n\t\t\t\tthis.bo_closeBluetoothAdapter()\n\t\t\t}\n\t\t\t// console.log(`newVal ${JSON.stringify(newVal)}, oldVal ${oldVal}`)\n\t\t}\n\t},\n\n\tmethods: {\n\t\t// 选择患者\n\t\tbindPickerChange(e) {\n\t\t\t// console.log(e)\n\t\t\tfor (let item of this.patientList) {\n\t\t\t\tif (item.id === Number(e.detail.value) + 1) {\n\t\t\t\t\tthis.pid = item.id\n\t\t\t\t\tthis.fetchPatientInfo(item.id)\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t// 获取患者列表(ID)\n\t\tasync fetchPatientList() {\n\t\t\tawait uni.request({\n\t\t\t\turl: 'https://ciai.le-cx.com/index.php/api/patient/patientList',\n\t\t\t\tsuccess: res => {\n\t\t\t\t\tthis.patientList = res.data.data\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\t// 获取患者信息\n\t\tasync fetchPatientInfo(id) {\n\t\t\tawait uni.request({\n\t\t\t\turl: `https://ciai.le-cx.com/index.php/api/patient/info?id=${id}`,\n\t\t\t\tsuccess: res => {\n\t\t\t\t\tthis.patient = res.data.data\n\t\t\t\t},\n\t\t\t})\n\t\t},\n\t\t// 切换导航tab\n\t\tswitchTab(index) {\n\t\t\tthis.currentIndex = index\n\t\t},\n\n\t\t// 获取当前时间\n\t\tgetNowTime() {\n\t\t\tlet now = new Date()\n\t\t\tlet hour = now.getHours()\n\t\t\tlet minute = now.getMinutes()\n\t\t\tlet second = now.getSeconds()\n\t\t\thour = hour < 10 ? '0' + hour : hour\n\t\t\tminute = minute < 10 ? '0' + minute : minute\n\t\t\tsecond = second < 10 ? '0' + second : second\n\t\t\tlet now_time = `${hour}:${minute}:${second}`\n\t\t\treturn now_time\n\t\t},\n\n\t\t// 获取当前时间戳\n\t\tgetTimestamp() {\n\t\t\tlet timestamp = new Date().getTime()\n\t\t\treturn timestamp\n\t\t},\n\n\t\t// 血氧信息存储\n\t\tasync saveBOData() {\n\t\t\tconsole.log(`this.bo_weared ${this.bo_weared}`)\n\t\t\tconsole.log(`this.bo_list ${this.bo_list.length}`)\n\t\t\tif (this.bo_weared === false && this.bo_list.length !== 0) {\n\t\t\t\tconsole.log('患者未佩戴血氧仪')\n\t\t\t\tconsole.log(this.bo_list)\n\t\t\t\tthis.bo_list = JSON.stringify(this.bo_list)\n\t\t\t\tawait uni.request({\n\t\t\t\t\turl: 'https://ciai.le-cx.com/index.php/api/alarm/putHealthRow',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tdata: this.bo_list\n\t\t\t\t\t},\n\t\t\t\t\theader: {\n\t\t\t\t\t\t'content-type': 'application/x-www-form-urlencoded',\n\t\t\t\t\t},\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tsuccess(res) {\n\t\t\t\t\t\tconsole.log(res.msg)\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\n\t\tinArray(arr, key, val) {\n\t\t\tfor (let i = 0; i < arr.length; i++) {\n\t\t\t\tif (arr[i][key] === val) {\n\t\t\t\t\treturn i;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn -1;\n\t\t},\n\n\t\t// ArrayBuffer转16进度字符串示例\n\t\tab2hex(buffer) {\n\t\t\tvar hexArr = Array.prototype.map.call(\n\t\t\t\tnew Uint8Array(buffer),\n\t\t\t\tfunction(bit) {\n\t\t\t\t\treturn ('00' + bit.toString(16)).slice(-2)\n\t\t\t\t}\n\t\t\t)\n\t\t\treturn hexArr.join('');\n\t\t},\n\n\t\t// 血压计\n\t\tbp_openBluetoothAdapter() {\n\t\t\tconsole.log('初始化血压计蓝牙')\n\t\t\tuni.openBluetoothAdapter({\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tconsole.log('openBluetoothAdapter success', res)\n\t\t\t\t\tthis.bp_startBluetoothDevicesDiscovery()\n\t\t\t\t},\n\t\t\t\tfail: (res) => {\n\t\t\t\t\tif (res.errCode === 10001) {\n\t\t\t\t\t\tuni.onBluetoothAdapterStateChange((res) => {\n\t\t\t\t\t\t\tconsole.log('onBluetoothAdapterStateChange', res)\n\t\t\t\t\t\t\tif (res.available) {\n\t\t\t\t\t\t\t\tthis.bp_startBluetoothDevicesDiscovery()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tbp_startBluetoothDevicesDiscovery() {\n\t\t\tif (this.bp_discoveryStarted) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\tthis.bp_discoveryStarted = true\n\t\t\tuni.startBluetoothDevicesDiscovery({\n\t\t\t\tallowDuplicatesKey: true,\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tconsole.log('startBluetoothDevicesDiscovery success', res)\n\t\t\t\t\tthis.bp_onBluetoothDeviceFound()\n\t\t\t\t},\n\t\t\t})\n\t\t},\n\t\tbp_getBluetoothAdapterState() {\n\t\t\tconsole.log('getBluetoothAdapterState')\n\t\t\tuni.getBluetoothAdapterState({\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tconsole.log('getBluetoothAdapterState', res)\n\t\t\t\t\tif (res.discovering) {\n\t\t\t\t\t\tthis.bp_onBluetoothDeviceFound()\n\t\t\t\t\t} else if (res.available) {\n\t\t\t\t\t\tthis.bp_startBluetoothDevicesDiscovery()\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tbp_onBluetoothDeviceFound() {\n\t\t\tconsole.log('开始查找蓝牙设备')\n\t\t\tuni.onBluetoothDeviceFound((res) => {\n\t\t\t\tvar devices = res.devices\n\t\t\t\tconsole.log('devices', devices[0].name)\n\t\t\t\tif (devices[0].name == 'FSRKB_BT-001') {\n\t\t\t\t\tlet e = devices[0]\n\t\t\t\t\tthis.bp_createBLEConnection(e)\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tbp_stopBluetoothDevicesDiscovery() {\n\t\t\tuni.stopBluetoothDevicesDiscovery()\n\t\t},\n\n\t\tbp_createBLEConnection(e) {\n\t\t\t// const ds = e.currentTarget.dataset\n\t\t\tconst deviceId = e.deviceId\n\t\t\tconst name = e.name\n\t\t\tuni.createBLEConnection({\n\t\t\t\tdeviceId,\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tconsole.log('连接血压计成功')\n\t\t\t\t\tthis.bp_connected = true\n\t\t\t\t\t// this.setData({\n\t\t\t\t\t// \tconnected: true,\n\t\t\t\t\t// \tname,\n\t\t\t\t\t// \tdeviceId,\n\t\t\t\t\t// })\n\t\t\t\t\tthis.bp_getBLEDeviceServices(deviceId)\n\t\t\t\t}\n\t\t\t})\n\t\t\tthis.bp_stopBluetoothDevicesDiscovery()\n\t\t},\n\t\t// bp_closeBLEConnection() {\n\t\t// \tuni.closeBLEConnection({\n\t\t// \t\tdeviceId: this.bp_deviceId\n\t\t// \t})\n\t\t// \tthis.bp_connected = false\n\t\t// \tthis.bp_chs: []\n\t\t// \tthis.bp_canWrite = false\n\t\t// },\n\n\t\tbp_getBLEDeviceServices(deviceId) {\n\t\t\tuni.getBLEDeviceServices({\n\t\t\t\tdeviceId,\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tfor (let i = 0; i < res.services.length; i++) {\n\t\t\t\t\t\tif (res.services[i].uuid == '0000FFF0-0000-1000-8000-00805F9B34FB') {\n\t\t\t\t\t\t\tthis.bp_getBLEDeviceCharacteristics(deviceId, res.services[i].uuid)\n\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tbp_getBLEDeviceCharacteristics(deviceId, serviceId) {\n\t\t\tuni.getBLEDeviceCharacteristics({\n\t\t\t\tdeviceId,\n\t\t\t\tserviceId,\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t// console.log('getBLEDeviceCharacteristics success', res.characteristics)\n\t\t\t\t\tfor (let i = 0; i < res.characteristics.length; i++) {\n\t\t\t\t\t\tlet item = res.characteristics[i]\n\t\t\t\t\t\tif (item.uuid == '0000FFF6-0000-1000-8000-00805F9B34FB') {\n\t\t\t\t\t\t\t// this.setData({\n\t\t\t\t\t\t\t// \tbp_canWrite: true\n\t\t\t\t\t\t\t// })\n\t\t\t\t\t\t\tthis.bp_canWrite = true\n\t\t\t\t\t\t\tthis.bp_deviceId = deviceId\n\t\t\t\t\t\t\tthis.bp_serviceId = serviceId\n\t\t\t\t\t\t\tthis.bp_characteristicId = item.uuid\n\t\t\t\t\t\t\tthis.bp_writeBLECharacteristicValue()\n\n\t\t\t\t\t\t\tuni.notifyBLECharacteristicValueChange({\n\t\t\t\t\t\t\t\tdeviceId,\n\t\t\t\t\t\t\t\tserviceId,\n\t\t\t\t\t\t\t\tcharacteristicId: item.uuid,\n\t\t\t\t\t\t\t\tstate: true,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tfail(res) {\n\t\t\t\t\tconsole.error('getBLEDeviceCharacteristics', res)\n\t\t\t\t}\n\t\t\t})\n\t\t\t// 操作之前先监听，保证第一时间获取数据\n\t\t\tuni.onBLECharacteristicValueChange((characteristic) => {\n\t\t\t\tlet vale = this.ab2hex(characteristic.value)\n\t\t\t\tif (vale.substr(6, 2) == 'cc') { //判断是否测量结束，结束则进入\n\t\t\t\t\tif (vale.substr(10, 2) == '00') { //判断是否错误，错误则进入\n\t\t\t\t\t\tswitch (parseInt(vale.substr(8, 2), 16)) {\n\t\t\t\t\t\t\tcase 1:\n\t\t\t\t\t\t\t\tconsole.log('传感器异常！')\n\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\tcase 2:\n\t\t\t\t\t\t\t\tconsole.log('不足以检测心跳或血压！')\n\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\tcase 3:\n\t\t\t\t\t\t\t\tconsole.log('异常测量结果！')\n\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\tcase 4:\n\t\t\t\t\t\t\t\tconsole.log('袖口太松或泄漏（10秒压力小于30毫米）')\n\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\tcase 5:\n\t\t\t\t\t\t\t\tconsole.log('气管堵塞')\n\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\tcase 6:\n\t\t\t\t\t\t\t\tconsole.log('压力波动过大')\n\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\tcase 7:\n\t\t\t\t\t\t\t\tconsole.log('压力超过上限')\n\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\tcase 8:\n\t\t\t\t\t\t\t\tconsole.log('请查看标准数据是否异常')\n\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t}\n\t\t\t\t\t} else { //输出测量结果\n\t\t\t\t\t\tconsole.log('高压：', parseInt(vale.substr(8, 2), 16), '低压：', parseInt(vale.substr(10, 2), 16), '心率', parseInt(\n\t\t\t\t\t\t\tvale.substr(12, 2), 16))\n\t\t\t\t\t}\n\t\t\t\t} else { //输出当前压力值\n\t\t\t\t\tconsole.log('当前压力：', parseInt(vale.substr(10, 2), 16))\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tbp_writeBLECharacteristicValue() {\n\t\t\tlet sz = [0xBE, 0xB0, 0x01, 0xc0, 0x36]\n\t\t\tlet buffer = new ArrayBuffer(5)\n\t\t\tlet dataView = new DataView(buffer)\n\n\t\t\tfor (let i = 0; i < 5; i++) {\n\t\t\t\tdataView.setUint8(i, sz[i])\n\t\t\t}\n\t\t\tconsole.log(buffer)\n\t\t\tuni.writeBLECharacteristicValue({\n\t\t\t\tdeviceId: this.bp_deviceId,\n\t\t\t\tserviceId: this.bp_serviceId,\n\t\t\t\tcharacteristicId: this.bp_characteristicId,\n\t\t\t\tvalue: buffer,\n\t\t\t})\n\t\t},\n\t\tbp_closeBluetoothAdapter() {\n\t\t\tuni.closeBluetoothAdapter()\n\t\t\tthis.bp_discoveryStarted = false\n\t\t},\n\n\t\t// 血氧仪\n\t\t// 初始化蓝牙模块\n\t\tbo_openBluetoothAdapter() {\n\t\t\tconsole.log('初始化蓝牙模块，进行血氧仪连接')\n\t\t\tuni.openBluetoothAdapter({\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tconsole.log('openBluetoothAdapter success', res)\n\t\t\t\t\tthis.bo_startBluetoothDevicesDiscovery()\n\t\t\t\t},\n\t\t\t\tfail: (res) => {\n\t\t\t\t\tif (res.errCode === 10001) {\n\t\t\t\t\t\tconsole.log('用户蓝牙未开启或者手机不支持蓝牙功能')\n\t\t\t\t\t\t// 监听手机蓝牙状态\n\t\t\t\t\t\tuni.onBluetoothAdapterStateChange(function(res) {\n\t\t\t\t\t\t\tconsole.log('onBluetoothAdapterStateChange监听手机蓝牙状态', res)\n\t\t\t\t\t\t\tif (res.available) {\n\t\t\t\t\t\t\t\tthis.bo_startBluetoothDevicesDiscovery()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\n\t\t// 开始搜寻附近的蓝牙设备\n\t\tbo_startBluetoothDevicesDiscovery() {\n\t\t\t// 通过bo_discoveryStarted判断是否开启蓝牙设备搜索\n\t\t\tif (this.bo_discoveryStarted) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\tthis.bo_discoveryStarted = true\n\t\t\tuni.startBluetoothDevicesDiscovery({\n\t\t\t\t// 允许重复上报同一设备\n\t\t\t\tallowDuplicatesKey: true,\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tconsole.log('startBluetoothDevicesDiscovery success', res)\n\t\t\t\t\tthis.bo_onBluetoothDeviceFound()\n\t\t\t\t},\n\t\t\t\tfail: () => {\n\t\t\t\t\tuni.showModal({\n\t\t\t\t\t\ttitile: '提示',\n\t\t\t\t\t\tcontent: '未搜索到蓝牙设备'\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\n\t\t// 监听寻找到新设备的事件\n\t\tbo_onBluetoothDeviceFound() {\n\t\t\tuni.onBluetoothDeviceFound((res) => {\n\t\t\t\tconsole.log('onBluetoothDeviceFound success', res)\n\t\t\t\tvar bo_devices = res.devices\n\t\t\t\tif (bo_devices[0].name == 'Samo4 pulse oximeter') {\n\t\t\t\t\tlet e = bo_devices[0]\n\t\t\t\t\tthis.bo_createBLEConnection(e)\n\t\t\t\t} else {\n\t\t\t\t\t// setTimeout(() => {\n\t\t\t\t\t// \t// 停止搜索蓝牙设备\n\t\t\t\t\t// \tthis.bo_stopBluetoothDevicesDiscovery()\n\t\t\t\t\t// }, 5000)\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\n\t\t// 连接低功耗蓝牙设备\n\t\tbo_createBLEConnection(e) {\n\t\t\tconsole.log('开始连接蓝牙~~~')\n\t\t\tconst deviceId = e.deviceId\n\t\t\tconst name = e.name\n\t\t\tuni.createBLEConnection({\n\t\t\t\tdeviceId,\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tconsole.log('连接蓝牙成功')\n\t\t\t\t\tthis.bo_connected = 1\n\t\t\t\t\tthis.bo_getBLEDeviceServices(deviceId)\n\t\t\t\t}\n\t\t\t})\n\t\t\tthis.bo_stopBluetoothDevicesDiscovery()\n\t\t},\n\n\t\t// 停止搜索附近的蓝牙设备\n\t\tbo_stopBluetoothDevicesDiscovery() {\n\t\t\tconsole.log('停止搜索蓝牙设备')\n\t\t\tuni.stopBluetoothDevicesDiscovery()\n\t\t},\n\n\t\t// 获取蓝牙设备所有服务\n\t\tbo_getBLEDeviceServices(deviceId) {\n\t\t\tconsole.log('获取血氧仪的所有服务')\n\t\t\tuni.getBLEDeviceServices({\n\t\t\t\tdeviceId,\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tfor (let i = 0; i < res.services.length; i++) {\n\t\t\t\t\t\tconsole.log('血氧仪的所有服务', res.services[i])\n\t\t\t\t\t\tif (res.services[i].uuid == '0000FFF0-0000-1000-8000-00805F9B34FB') {\n\t\t\t\t\t\t\tthis.bo_getBLEDeviceCharacteristics(deviceId, res.services[i].uuid)\n\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\n\t\t// 获取蓝牙设备某个服务中所有特征值\n\t\tbo_getBLEDeviceCharacteristics(deviceId, serviceId) {\n\t\t\tconsole.log('获取血氧仪的特征值')\n\t\t\tuni.getBLEDeviceCharacteristics({\n\t\t\t\tdeviceId,\n\t\t\t\tserviceId,\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tfor (let i = 0; i < res.characteristics.length; i++) {\n\t\t\t\t\t\tlet item = res.characteristics[i]\n\t\t\t\t\t\tconsole.log('血氧仪某个服务的特征值', item)\n\t\t\t\t\t\tif (item.uuid == '0000FFF4-0000-1000-8000-00805F9B34FB') {\n\t\t\t\t\t\t\tthis.bo_canWrite = true\n\t\t\t\t\t\t\tthis.bo_deviceId = deviceId\n\t\t\t\t\t\t\tthis.bo_serviceId = serviceId\n\t\t\t\t\t\t\tthis.bo_characteristicId = item.uuid\n\t\t\t\t\t\t\tthis.bo_writeBLECharacteristicValue()\n\t\t\t\t\t\t\t// 启用低功耗蓝牙设备特征值变化时的 notify 功能，订阅特征值\n\t\t\t\t\t\t\tuni.notifyBLECharacteristicValueChange({\n\t\t\t\t\t\t\t\tdeviceId,\n\t\t\t\t\t\t\t\tserviceId,\n\t\t\t\t\t\t\t\tcharacteristicId: item.uuid,\n\t\t\t\t\t\t\t\tstate: true,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tfail(res) {\n\t\t\t\t\tconsole.error('getBLEDeviceCharacteristics', res)\n\t\t\t\t}\n\t\t\t})\n\n\t\t\t// 监听低功耗蓝牙设备的特征值变化事件，(操作之前先监听，保证第一时间获取数据)\n\t\t\tuni.onBLECharacteristicValueChange((characteristic) => {\n\t\t\t\tlet vale = this.ab2hex(characteristic.value)\n\t\t\t\tif (vale.substr(20, 2) == 1) { //判断是否戴好\n\t\t\t\t\tconsole.log('未戴好！')\n\t\t\t\t\tthis.bo_weared = false\n\t\t\t\t} else {\n\t\t\t\t\t// bo_weared判断患者是否戴上血氧仪\n\t\t\t\t\tif (this.bo_weared != true) {\n\t\t\t\t\t\tthis.bo_weared = true\n\t\t\t\t\t}\n\t\t\t\t\tthis.blood_oxygen = parseInt(vale.substr(16, 2), 16)\n\t\t\t\t\tthis.pulse_rate = parseInt(vale.substr(18, 2), 16)\n\t\t\t\t\tlet bo = {\n\t\t\t\t\t\t'type': 2,\n\t\t\t\t\t\t'value': this.blood_oxygen,\n\t\t\t\t\t\t'patient_id': this.pid,\n\t\t\t\t\t\t'pulse_rate': this.pulse_rate,\n\t\t\t\t\t\t'timestamp': this.getTimestamp()\n\t\t\t\t\t}\n\t\t\t\t\tthis.bo_list.push(bo)\n\t\t\t\t\tconsole.log(`当前血氧饱和度: ${this.blood_oxygen},  脉率值${this.pulse_rate}, 数据列表${this.bo_list}`)\n\t\t\t\t\t// console.log('当前血氧含量为：', parseInt(vale.substr(16, 2), 16), '脉率值:', parseInt(vale.substr(18, 2), 16)) //输出当前血氧饱和度,脉率值\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\n\t\t// 发送二进制数据\n\t\tbo_writeBLECharacteristicValue() {\n\t\t\tlet buffer = new ArrayBuffer(1)\n\t\t\tlet dataView = new DataView(buffer)\n\t\t\tconsole.log(`buffer是${this.buffer}, dataView是${this.dataView}`)\n\t\t\tdataView.setUint8(0, 0)\n\t\t\tuni.writeBLECharacteristicValue({\n\t\t\t\tdeviceId: this.bo_deviceId,\n\t\t\t\tserviceId: this.bo_serviceId,\n\t\t\t\tcharacteristicId: this.bo_characteristicId,\n\t\t\t\tvalue: buffer,\n\t\t\t})\n\t\t},\n\n\t\t// 关闭蓝牙模块\n\t\tbo_closeBluetoothAdapter() {\n\t\t\tuni.closeBluetoothAdapter({\n\t\t\t\tsuccess() {\n\t\t\t\t\tthis.bo_discoveryStarted = false\n\t\t\t\t\tthis.bo_connected = 2\n\t\t\t\t\tthis.bo_list = []\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t},\n}\n","import mod from \"-!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-1!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-2!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./collect-data.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-1!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-2!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./collect-data.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1586862610874\n      var cssReload = require(\"C:/lhf/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}