{"version":3,"sources":["webpack:///C:/Users/window/Desktop/nursing-home/main.js","webpack:///C:/Users/window/Desktop/nursing-home/pages/collect-data/collect-data.vue?94d3","webpack:///C:/Users/window/Desktop/nursing-home/pages/collect-data/collect-data.vue?492f","webpack:///C:/Users/window/Desktop/nursing-home/pages/collect-data/collect-data.vue?8fde","webpack:///C:/Users/window/Desktop/nursing-home/pages/collect-data/collect-data.vue?84e0","webpack:///C:/Users/window/Desktop/nursing-home/pages/collect-data/collect-data.vue","webpack:///C:/Users/window/Desktop/nursing-home/pages/collect-data/collect-data.vue?b650","webpack:///C:/Users/window/Desktop/nursing-home/pages/collect-data/collect-data.vue?282f"],"names":["createPage","Page","data","navTitles","currentIndex","cWidth","cHeight","pixelRatio","patientList","patient","pid","bp_devices","bp_connected","bp_chs","bp_discoveryStarted","bp_canWrite","bp_deviceId","bp_serviceId","bp_characteristicId","bp_list","bp_categories","bo_devices","bo_connected","bo_chs","bo_discoveryStarted","bo_canWrite","bo_deviceId","bo_serviceId","bo_characteristicId","bo_list","bo_categories","this_week","avg_val_blood","avg_val_time","onLoad","options","patient_id","fetchPatientInfo","fetchPatientList","methods","bindPickerChange","e","item","id","Number","detail","value","uni","request","url","success","res","switchTab","index","getNowTime","now","Date","hour","getHours","minute","getMinutes","second","getSeconds","now_time","inArray","arr","key","val","i","length","ab2hex","buffer","hexArr","Array","prototype","map","call","Uint8Array","bit","toString","slice","join","bp_openBluetoothAdapter","console","log","openBluetoothAdapter","bp_startBluetoothDevicesDiscovery","fail","errCode","onBluetoothAdapterStateChange","available","startBluetoothDevicesDiscovery","allowDuplicatesKey","bp_onBluetoothDeviceFound","bp_getBluetoothAdapterState","getBluetoothAdapterState","discovering","onBluetoothDeviceFound","devices","name","bp_createBLEConnection","bp_stopBluetoothDevicesDiscovery","stopBluetoothDevicesDiscovery","deviceId","createBLEConnection","bp_getBLEDeviceServices","getBLEDeviceServices","services","uuid","bp_getBLEDeviceCharacteristics","serviceId","getBLEDeviceCharacteristics","characteristics","bp_writeBLECharacteristicValue","notifyBLECharacteristicValueChange","characteristicId","state","error","onBLECharacteristicValueChange","characteristic","vale","substr","parseInt","sz","ArrayBuffer","dataView","DataView","setUint8","writeBLECharacteristicValue","bp_closeBluetoothAdapter","closeBluetoothAdapter","bo_openBluetoothAdapter","bo_startBluetoothDevicesDiscovery","bo_onBluetoothDeviceFound","bo_createBLEConnection","bo_getBLEDeviceServices","bo_stopBluetoothDevicesDiscovery","bo_getBLEDeviceCharacteristics","bo_writeBLECharacteristicValue","bo_closeBluetoothAdapter"],"mappings":"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","file":"pages/collect-data/collect-data.js","sourcesContent":["import 'uni-pages';import '@dcloudio/uni-stat';\n\nimport Vue from 'vue'\nimport Page from './pages/collect-data/collect-data.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./collect-data.vue?vue&type=template&id=2786e414&\"\nvar renderjs\nimport script from \"./collect-data.vue?vue&type=script&lang=js&\"\nexport * from \"./collect-data.vue?vue&type=script&lang=js&\"\nimport style0 from \"./collect-data.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"Users/window/Desktop/nursing-home/pages/collect-data/collect-data.vue\"\nexport default component.exports","export * from \"-!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./collect-data.vue?vue&type=template&id=2786e414&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./collect-data.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./collect-data.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport uCharts from '@/components/u-charts/u-charts.js';\n\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tnavTitles: ['血压', '血氧', '血糖'],\n\t\t\tcurrentIndex: 0,\n\t\t\tcWidth: '',\n\t\t\tcHeight: '',\n\t\t\tpixelRatio: 1,\n\t\t\tpatientList: [],\n\t\t\tpatient: null,\n\t\t\tpid: '',\n\t\t\t// 血压\n\t\t\tbp_devices: [],\n\t\t\tbp_connected: false,\n\t\t\tbp_chs: [],\n\t\t\tbp_discoveryStarted: false,\n\t\t\tbp_canWrite: false,\n\t\t\tbp_deviceId: '',\n\t\t\tbp_serviceId: '',\n\t\t\tbp_characteristicId: '',\n\t\t\tbp_list: [],\n\t\t\tbp_categories: [],\n\t\t\t// 血氧\n\t\t\tbo_devices: [],\n\t\t\tbo_connected: false,\n\t\t\tbo_chs: [],\n\t\t\tbo_discoveryStarted: false,\n\t\t\tbo_canWrite: false,\n\t\t\tbo_deviceId: '',\n\t\t\tbo_serviceId: '',\n\t\t\tbo_characteristicId: '',\n\t\t\tbo_list: [],\n\t\t\tbo_categories: [],\n\n\t\t\tthis_week: '6月7日-6月13日',\n\t\t\tavg_val_blood: '135/80',\n\t\t\tavg_val_time: 65,\n\t\t};\n\t},\n\tonLoad(options) {\n\t\t// console.log('options',options)\n\t\t// 从客户管理界面进来会传入pid\n\t\tif (options.patient_id) {\n\t\t\tthis.fetchPatientInfo(options.patient_id)\n\t\t}\n\t\tthis.fetchPatientList()\n\t},\n\n\tmethods: {\n\t\t// 选择患者\n\t\tbindPickerChange(e) {\n\t\t\t// console.log(e)\n\t\t\tfor (let item of this.patientList) {\n\t\t\t\tif (item.id === Number(e.detail.value) + 1) {\n\t\t\t\t\tthis.fetchPatientInfo(item.id)\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t// 获取患者列表(ID)\n\t\tasync fetchPatientList() {\n\t\t\tawait uni.request({\n\t\t\t\turl: 'https://ciai.le-cx.com/index.php/api/patient/patientList',\n\t\t\t\tsuccess: res => {\n\t\t\t\t\tthis.patientList = res.data.data\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\t// 获取患者信息\n\t\tasync fetchPatientInfo(id) {\n\t\t\tawait uni.request({\n\t\t\t\turl: `https://ciai.le-cx.com/index.php/api/patient/info?id=${id}`,\n\t\t\t\tsuccess: res => {\n\t\t\t\t\tthis.patient = res.data.data\n\t\t\t\t},\n\t\t\t})\n\t\t},\n\t\t// 切换导航tab\n\t\tswitchTab(index) {\n\t\t\tthis.currentIndex = index\n\t\t},\n\n\t\t// 获取当前时间\n\t\tgetNowTime() {\n\t\t\tlet now = new Date()\n\t\t\tlet hour = now.getHours()\n\t\t\tlet minute = now.getMinutes()\n\t\t\tlet second = now.getSeconds()\n\t\t\thour = hour < 10 ? '0' + hour : hour\n\t\t\tminute = minute < 10 ? '0' + minute : minute\n\t\t\tsecond = second < 10 ? '0' + second : second\n\t\t\tlet now_time = `${hour}:${minute}:${second}`\n\t\t\treturn now_time\n\t\t},\n\n\t\tinArray(arr, key, val) {\n\t\t\tfor (let i = 0; i < arr.length; i++) {\n\t\t\t\tif (arr[i][key] === val) {\n\t\t\t\t\treturn i;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn -1;\n\t\t},\n\n\t\t// ArrayBuffer转16进度字符串示例\n\t\tab2hex(buffer) {\n\t\t\tvar hexArr = Array.prototype.map.call(\n\t\t\t\tnew Uint8Array(buffer),\n\t\t\t\tfunction(bit) {\n\t\t\t\t\treturn ('00' + bit.toString(16)).slice(-2)\n\t\t\t\t}\n\t\t\t)\n\t\t\treturn hexArr.join('');\n\t\t},\n\n\t\t// 血压计\n\t\tbp_openBluetoothAdapter() {\n\t\t\tconsole.log('初始化血压计蓝牙')\n\t\t\tuni.openBluetoothAdapter({\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tconsole.log('openBluetoothAdapter success', res)\n\t\t\t\t\tthis.bp_startBluetoothDevicesDiscovery()\n\t\t\t\t},\n\t\t\t\tfail: (res) => {\n\t\t\t\t\tif (res.errCode === 10001) {\n\t\t\t\t\t\tuni.onBluetoothAdapterStateChange((res) => {\n\t\t\t\t\t\t\tconsole.log('onBluetoothAdapterStateChange', res)\n\t\t\t\t\t\t\tif (res.available) {\n\t\t\t\t\t\t\t\tthis.bp_startBluetoothDevicesDiscovery()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tbp_startBluetoothDevicesDiscovery() {\n\t\t\tif (this.bp_discoveryStarted) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\tthis.bp_discoveryStarted = true\n\t\t\tuni.startBluetoothDevicesDiscovery({\n\t\t\t\tallowDuplicatesKey: true,\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tconsole.log('startBluetoothDevicesDiscovery success', res)\n\t\t\t\t\tthis.bp_onBluetoothDeviceFound()\n\t\t\t\t},\n\t\t\t})\n\t\t},\n\t\tbp_getBluetoothAdapterState() {\n\t\t\tconsole.log('getBluetoothAdapterState')\n\t\t\tuni.getBluetoothAdapterState({\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tconsole.log('getBluetoothAdapterState', res)\n\t\t\t\t\tif (res.discovering) {\n\t\t\t\t\t\tthis.bp_onBluetoothDeviceFound()\n\t\t\t\t\t} else if (res.available) {\n\t\t\t\t\t\tthis.bp_startBluetoothDevicesDiscovery()\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tbp_onBluetoothDeviceFound() {\n\t\t\tconsole.log('开始查找蓝牙设备')\n\t\t\tuni.onBluetoothDeviceFound((res) => {\n\t\t\t\tvar devices = res.devices\n\t\t\t\tconsole.log('devices', devices[0].name)\n\t\t\t\tif (devices[0].name == 'FSRKB_BT-001') {\n\t\t\t\t\tlet e = devices[0]\n\t\t\t\t\tthis.bp_createBLEConnection(e)\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tbp_stopBluetoothDevicesDiscovery() {\n\t\t\tuni.stopBluetoothDevicesDiscovery()\n\t\t},\n\n\t\tbp_createBLEConnection(e) {\n\t\t\t// const ds = e.currentTarget.dataset\n\t\t\tconst deviceId = e.deviceId\n\t\t\tconst name = e.name\n\t\t\tuni.createBLEConnection({\n\t\t\t\tdeviceId,\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tconsole.log('连接血压计成功')\n\t\t\t\t\tthis.bp_connected = true\n\t\t\t\t\t// this.setData({\n\t\t\t\t\t// \tconnected: true,\n\t\t\t\t\t// \tname,\n\t\t\t\t\t// \tdeviceId,\n\t\t\t\t\t// })\n\t\t\t\t\tthis.bp_getBLEDeviceServices(deviceId)\n\t\t\t\t}\n\t\t\t})\n\t\t\tthis.bp_stopBluetoothDevicesDiscovery()\n\t\t},\n\t\t// bp_closeBLEConnection() {\n\t\t// \tuni.closeBLEConnection({\n\t\t// \t\tdeviceId: this.data.deviceId\n\t\t// \t})\n\t\t// \t// this.setData({\n\t\t// \t// \tconnected: false,\n\t\t// \t// \tchs: [],\n\t\t// \t// \tcanWrite: false,\n\t\t// \t// })\n\t\t// \tthis.bp_connected = false\n\t\t// \tthis.bp_chs: []\n\t\t// \tthis.canWrite = false\n\t\t// },\n\n\t\tbp_getBLEDeviceServices(deviceId) {\n\t\t\tuni.getBLEDeviceServices({\n\t\t\t\tdeviceId,\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tfor (let i = 0; i < res.services.length; i++) {\n\t\t\t\t\t\tif (res.services[i].uuid == '0000FFF0-0000-1000-8000-00805F9B34FB') {\n\t\t\t\t\t\t\tthis.bp_getBLEDeviceCharacteristics(deviceId, res.services[i].uuid)\n\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tbp_getBLEDeviceCharacteristics(deviceId, serviceId) {\n\t\t\tuni.getBLEDeviceCharacteristics({\n\t\t\t\tdeviceId,\n\t\t\t\tserviceId,\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t// console.log('getBLEDeviceCharacteristics success', res.characteristics)\n\t\t\t\t\tfor (let i = 0; i < res.characteristics.length; i++) {\n\t\t\t\t\t\tlet item = res.characteristics[i]\n\t\t\t\t\t\tif (item.uuid == '0000FFF6-0000-1000-8000-00805F9B34FB') {\n\t\t\t\t\t\t\t// this.setData({\n\t\t\t\t\t\t\t// \tbp_canWrite: true\n\t\t\t\t\t\t\t// })\n\t\t\t\t\t\t\tthis.bp_canWrite = true\n\t\t\t\t\t\t\tthis.bp_deviceId = deviceId\n\t\t\t\t\t\t\tthis.bp_serviceId = serviceId\n\t\t\t\t\t\t\tthis.bp_characteristicId = item.uuid\n\t\t\t\t\t\t\tthis.bp_writeBLECharacteristicValue()\n\n\t\t\t\t\t\t\tuni.notifyBLECharacteristicValueChange({\n\t\t\t\t\t\t\t\tdeviceId,\n\t\t\t\t\t\t\t\tserviceId,\n\t\t\t\t\t\t\t\tcharacteristicId: item.uuid,\n\t\t\t\t\t\t\t\tstate: true,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tfail(res) {\n\t\t\t\t\tconsole.error('getBLEDeviceCharacteristics', res)\n\t\t\t\t}\n\t\t\t})\n\t\t\t// 操作之前先监听，保证第一时间获取数据\n\t\t\tuni.onBLECharacteristicValueChange((characteristic) => {\n\t\t\t\tlet vale = this.ab2hex(characteristic.value)\n\t\t\t\tif (vale.substr(6, 2) == 'cc') { //判断是否测量结束，结束则进入\n\t\t\t\t\tif (vale.substr(10, 2) == '00') { //判断是否错误，错误则进入\n\t\t\t\t\t\tswitch (parseInt(vale.substr(8, 2), 16)) {\n\t\t\t\t\t\t\tcase 1:\n\t\t\t\t\t\t\t\tconsole.log('传感器异常！')\n\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\tcase 2:\n\t\t\t\t\t\t\t\tconsole.log('不足以检测心跳或血压！')\n\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\tcase 3:\n\t\t\t\t\t\t\t\tconsole.log('异常测量结果！')\n\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\tcase 4:\n\t\t\t\t\t\t\t\tconsole.log('袖口太松或泄漏（10秒压力小于30毫米）')\n\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\tcase 5:\n\t\t\t\t\t\t\t\tconsole.log('气管堵塞')\n\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\tcase 6:\n\t\t\t\t\t\t\t\tconsole.log('压力波动过大')\n\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\tcase 7:\n\t\t\t\t\t\t\t\tconsole.log('压力超过上限')\n\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\tcase 8:\n\t\t\t\t\t\t\t\tconsole.log('请查看标准数据是否异常')\n\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t}\n\t\t\t\t\t} else { //输出测量结果\n\t\t\t\t\t\tconsole.log('高压：', parseInt(vale.substr(8, 2), 16), '低压：', parseInt(vale.substr(10, 2), 16), '心率', parseInt(vale.substr(12, 2), 16))\n\t\t\t\t\t}\n\t\t\t\t} else { //输出当前压力值\n\t\t\t\t\tconsole.log('当前压力：', parseInt(vale.substr(10, 2), 16))\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\tbp_writeBLECharacteristicValue() {\n\t\t\tlet sz = [0xBE, 0xB0, 0x01, 0xc0, 0x36]\n\t\t\tlet buffer = new ArrayBuffer(5)\n\t\t\tlet dataView = new DataView(buffer)\n\n\t\t\tfor (let i = 0; i < 5; i++) {\n\t\t\t\tdataView.setUint8(i, sz[i])\n\t\t\t}\n\t\t\tconsole.log(buffer)\n\t\t\tuni.writeBLECharacteristicValue({\n\t\t\t\tdeviceId: this.bp_deviceId,\n\t\t\t\tserviceId: this.bp_serviceId,\n\t\t\t\tcharacteristicId: this.bp_characteristicId,\n\t\t\t\tvalue: buffer,\n\t\t\t})\n\t\t},\n\t\tbp_closeBluetoothAdapter() {\n\t\t\tuni.closeBluetoothAdapter()\n\t\t\tthis.bp_discoveryStarted = false\n\t\t},\n\n\t\t// 血氧仪\n\t\t// 初始化蓝牙模块\n\t\tbo_openBluetoothAdapter() {\n\t\t\tconsole.log('初始化蓝牙模块，进行血氧仪连接')\n\t\t\tuni.openBluetoothAdapter({\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tconsole.log('openBluetoothAdapter success', res)\n\t\t\t\t\tthis.bo_startBluetoothDevicesDiscovery()\n\t\t\t\t},\n\t\t\t\tfail: (res) => {\n\t\t\t\t\tif (res.errCode === 10001) {\n\t\t\t\t\t\tconsole.log('用户蓝牙未开启或者手机不支持蓝牙功能')\n\t\t\t\t\t\t// 监听手机蓝牙状态\n\t\t\t\t\t\tuni.onBluetoothAdapterStateChange(function(res) {\n\t\t\t\t\t\t\tconsole.log('onBluetoothAdapterStateChange监听手机蓝牙状态', res)\n\t\t\t\t\t\t\tif (res.available) {\n\t\t\t\t\t\t\t\tthis.bo_startBluetoothDevicesDiscovery()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\n\t\t// 开始搜寻附近的蓝牙设备\n\t\tbo_startBluetoothDevicesDiscovery() {\n\t\t\t// 通过bo_discoveryStarted判断是否开启蓝牙设备搜索\n\t\t\tif (this.bo_discoveryStarted) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\tthis.bo_discoveryStarted = true\n\t\t\tuni.startBluetoothDevicesDiscovery({\n\t\t\t\t// 允许重复上报同一设备\n\t\t\t\tallowDuplicatesKey: true,\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tconsole.log('startBluetoothDevicesDiscovery success', res)\n\t\t\t\t\tthis.bo_onBluetoothDeviceFound()\n\t\t\t\t},\n\t\t\t})\n\t\t},\n\n\t\t// 监听寻找到新设备的事件\n\t\tbo_onBluetoothDeviceFound() {\n\t\t\tuni.onBluetoothDeviceFound((res) => {\n\t\t\t\tconsole.log('onBluetoothDeviceFound success', res)\n\t\t\t\tvar bo_devices = res.devices\n\t\t\t\tif (bo_devices[0].name == 'Samo4 pulse oximeter') {\n\t\t\t\t\tlet e = bo_devices[0]\n\t\t\t\t\tthis.bo_createBLEConnection(e)\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\n\t\t// 连接低功耗蓝牙设备\n\t\tbo_createBLEConnection(e) {\n\t\t\tconsole.log('开始连接蓝牙~~~')\n\t\t\tconst deviceId = e.deviceId\n\t\t\tconst name = e.name\n\t\t\tuni.createBLEConnection({\n\t\t\t\tdeviceId,\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t// this.setData({\n\t\t\t\t\t// \tconnected: true,\n\t\t\t\t\t// \tname,\n\t\t\t\t\t// \tdeviceId,\n\t\t\t\t\t// })\n\t\t\t\t\tconsole.log('连接蓝牙成功')\n\t\t\t\t\tthis.bo_connected = true\n\t\t\t\t\tthis.bo_getBLEDeviceServices(deviceId)\n\t\t\t\t}\n\t\t\t})\n\t\t\tthis.bo_stopBluetoothDevicesDiscovery()\n\t\t},\n\n\t\t// 停止搜索附近的蓝牙设备\n\t\tbo_stopBluetoothDevicesDiscovery() {\n\t\t\tconsole.log('停止搜索蓝牙设备')\n\t\t\tuni.stopBluetoothDevicesDiscovery()\n\t\t},\n\n\t\t// 获取蓝牙设备所有服务\n\t\tbo_getBLEDeviceServices(deviceId) {\n\t\t\tconsole.log('获取血氧仪的所有服务')\n\t\t\tuni.getBLEDeviceServices({\n\t\t\t\tdeviceId,\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tfor (let i = 0; i < res.services.length; i++) {\n\t\t\t\t\t\tconsole.log('血氧仪的所有服务', res.services[i])\n\t\t\t\t\t\tif (res.services[i].uuid == '0000FFF0-0000-1000-8000-00805F9B34FB') {\n\t\t\t\t\t\t\tthis.bo_getBLEDeviceCharacteristics(deviceId, res.services[i].uuid)\n\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\n\t\t// 获取蓝牙设备某个服务中所有特征值\n\t\tbo_getBLEDeviceCharacteristics(deviceId, serviceId) {\n\t\t\tconsole.log('获取血氧仪的特征值')\n\t\t\tuni.getBLEDeviceCharacteristics({\n\t\t\t\tdeviceId,\n\t\t\t\tserviceId,\n\t\t\t\tsuccess: (res) => {\n\t\t\t\t\tfor (let i = 0; i < res.characteristics.length; i++) {\n\t\t\t\t\t\tlet item = res.characteristics[i]\n\t\t\t\t\t\tconsole.log('血氧仪某个服务的特征值', item)\n\t\t\t\t\t\tif (item.uuid == '0000FFF4-0000-1000-8000-00805F9B34FB') {\n\t\t\t\t\t\t\tthis.bo_canWrite = true\n\t\t\t\t\t\t\tthis.bo_deviceId = deviceId\n\t\t\t\t\t\t\tthis.bo_serviceId = serviceId\n\t\t\t\t\t\t\tthis.bo_characteristicId = item.uuid\n\t\t\t\t\t\t\tthis.bo_writeBLECharacteristicValue()\n\t\t\t\t\t\t\t// 启用低功耗蓝牙设备特征值变化时的 notify 功能，订阅特征值\n\t\t\t\t\t\t\tuni.notifyBLECharacteristicValueChange({\n\t\t\t\t\t\t\t\tdeviceId,\n\t\t\t\t\t\t\t\tserviceId,\n\t\t\t\t\t\t\t\tcharacteristicId: item.uuid,\n\t\t\t\t\t\t\t\tstate: true,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tfail(res) {\n\t\t\t\t\tconsole.error('getBLEDeviceCharacteristics', res)\n\t\t\t\t}\n\t\t\t})\n\n\t\t\t// 监听低功耗蓝牙设备的特征值变化事件，(操作之前先监听，保证第一时间获取数据)\n\t\t\tuni.onBLECharacteristicValueChange((characteristic) => {\n\t\t\t\tlet vale = this.ab2hex(characteristic.value)\n\t\t\t\tif (vale.substr(20, 2) == 1) { //判断是否戴好\n\t\t\t\t\tconsole.log('未戴好！')\n\t\t\t\t} else {\n\t\t\t\t\tconsole.log('当前血氧含量为：', parseInt(vale.substr(16, 2), 16), '脉率值:', parseInt(vale.substr(18, 2), 16)) //输出当前血氧饱和度,脉率值\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\n\t\tbo_writeBLECharacteristicValue() {\n\t\t\tlet buffer = new ArrayBuffer(1)\n\t\t\tlet dataView = new DataView(buffer)\n\t\t\tdataView.setUint8(0, 0)\n\t\t\tuni.writeBLECharacteristicValue({\n\t\t\t\tdeviceId: this.bo_deviceId,\n\t\t\t\tserviceId: this.bo_serviceId,\n\t\t\t\tcharacteristicId: this.bo_characteristicId,\n\t\t\t\tvalue: buffer,\n\t\t\t})\n\t\t},\n\n\t\tbo_closeBluetoothAdapter() {\n\t\t\tuni.closeBluetoothAdapter()\n\t\t\tthis.bo_discoveryStarted = false\n\t\t},\n\t},\n}\n","import mod from \"-!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-1!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-2!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./collect-data.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-1!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-2!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../lhf/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./collect-data.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1586501445993\n      var cssReload = require(\"C:/lhf/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}